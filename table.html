<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">

<head>
<title>å·®åˆ†ç½®ãå ´</title>
<!-- iconè¨­å®š -->
<link rel="icon" href="icon/120.png" type="image/png">
<link rel="apple-touch-icon" sizes="120x120" href="icon/120.png">

<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="bmstable" content= "header.json" /> <!--ã€€èª­ã¿è¾¼ã‚€é›£æ˜“åº¦è¡¨ã®ãƒ˜ãƒƒãƒ€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã“ã“ã«æŒ‡å®šã€€-->
<link href="style/style.css" rel="stylesheet" type="text/css" media="screen,print" />
<script src="style/jquery-2.0.2.min.js"></script>
</head>



<body>
<a href="index.html"><img src="icon/24.png" alt="Back Home"title="ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹"></a> <!-- /aã¯çµ‚äº†ã‚³ãƒ¼ãƒ‰(ä»˜ã‘å¿˜ã‚Œãªã„ã‚ˆã†ã«) -->

<center>
<strong><span style="font-size: 24pt;">å·®åˆ†ç½®ãå ´</span></strong><br>
<br>

<strong><span style="font-size: 12pt;">é›‘ã«ä½œã£ãŸã ã‘ãªã®ã§è¦‹ã¥ã‚‰ã„ã®ã¯è¨±ã—ã¦ãã ã•ã„ï¼›ï¼›</span></strong><br> 
ã¾ã„ãºãƒ¼ã˜<br>
<a href="http://www.dream-pro.info/~lavalse/LR2IR/search.cgi?mode=mypage&playerid=167171&guestmode=1" target="_blank" rel="noopener noreferrer" >IR</a>
<a href="https://boku.tachi.ac/u/sdf/games/bms/7K/scores" target="_blank" rel="noopener noreferrer" >Bokutachi</a><br>
</center>

<br>

<!--ã€€ã€€ã€€ã€€ã€€ã“ã“ã‹ã‚‰é›£æ˜“åº¦è¡¨æœ¬ä½“ã€€ã€€ã€€ã€€ã€€-->
<div class="tableflame">
<table align="center" cellspacing="1" cellpadding=2ã€€border="0" bgcolor="#000000" id="table_int">
</table>
</div>

<!-- ä»® ã‚½ãƒ¼ãƒˆçŸ¢å° -->
<style>
    /* ã‚½ãƒ¼ãƒˆå¯èƒ½ãªã‚«ãƒ©ãƒ ã®è¦‹ãŸç›® */
    td[sortable] {
        position: relative;
        cursor: pointer;
        padding-right: 15px;
    }
    td[sortable]:after {
        content: 'â†•'; /* åˆæœŸçŸ¢å° */
        position: absolute;
        right: 5px;
        color: gray;
    }
    td[sortable].sort-asc:after {
        content: 'â–²'; /* æ˜‡é †çŸ¢å° */
        color: blue;
    }
    td[sortable].sort-desc:after {
        content: 'â–¼'; /* é™é †çŸ¢å° */
        color: red;
    }
</style>
<script language="javascript" type="text/javascript">

// ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹é–‰
function menu(tName){
	let tMenu = document.getElementById(tName).style;
	if (tMenu.display == 'none')
	{
		tMenu.display = "block";
	}
	else
	{
		tMenu.display = "none";
	}
}

// 'GASã‚’ä½¿ã£ã¦ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰jsonã«å¤‰æ›ã—ãŸå·®åˆ†æƒ…å ±'ã‚’å–å¾—
$(document).ready(function(){
	$.getJSON($("meta[name=bmstable]").attr("content"), function(header){
		$.getJSON(header.data_url, function(information){
			// headerã®sortæœ‰ç„¡ã§åˆ†å²
			if(header["level"])
			{
				makeBMSTable(information,header.symbol,header["level"]);
			} 
			else 
			{
				makeBMSTable(information,header.symbol);
			}
		});
	});
});


function makeBMSTable(info, mark, order) {
    if(typeof order === 'undefined') order = null;

    let obj = $("#table_int");
    obj.html("");

    // è¡¨ç¤º/éè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³
    let toggleButton = $("<button id='toggleRows' style='margin-bottom:10px;'>åŒºåˆ‡ã‚Šè¡Œã‚’éè¡¨ç¤ºã«ã™ã‚‹</button>");
    toggleButton.on("click", function() {
        let isHidden = $(".tr_separate").is(":hidden");
        $(".tr_separate").toggle();
        $(this).text(isHidden ? "åŒºåˆ‡ã‚Šè¡Œã‚’éè¡¨ç¤ºã«ã™ã‚‹" : "åŒºåˆ‡ã‚Šè¡Œã‚’è¡¨ç¤ºã™ã‚‹");
    });
    obj.before(toggleButton);

    let headerRow = $("<tr height='20' style='color:white;background-color:#666666'></tr>");
    let headers = ["LV", "å‹•ç”»", "è­œé¢", "ã‚¿ã‚¤ãƒˆãƒ«(IRãƒªãƒ³ã‚¯)", "ä½œè€…(æ•¬ç§°ç•¥) / æœ¬ä½“ãƒªãƒ³ã‚¯", "å·®åˆ†", "BPM", "total", "è¿½åŠ æ—¥æ™‚", "ã‚³ãƒ¡ãƒ³ãƒˆ"];
    let sortableIndexes = ["LV", "ã‚¿ã‚¤ãƒˆãƒ«(IRãƒªãƒ³ã‚¯)", "ä½œè€…(æ•¬ç§°ç•¥) / æœ¬ä½“ãƒªãƒ³ã‚¯", "BPM", "total", "è¿½åŠ æ—¥æ™‚", "ã‚³ãƒ¡ãƒ³ãƒˆ"];
    let sortState = {};

    headers.forEach((text, index) => {
        let headerCell = $("<td align='center'>" + text + "</td>");
        
        // ã‚½ãƒ¼ãƒˆå¯èƒ½ãªã‚«ãƒ©ãƒ æ§‹ç¯‰
        if (sortableIndexes.includes(text)) {
            headerCell.attr("sortable", true);
            headerCell.on("click", function() {
                sortState[index] = !sortState[index]; // ã‚½ãƒ¼ãƒˆæ–¹å‘ã‚’åˆ‡ã‚Šæ›¿ãˆ
                let rows = obj.find("tr:gt(0)").toArray().sort(comparer(index, text, sortState[index]));
                if (!sortState[index]) { rows.reverse(); }

                // ã‚½ãƒ¼ãƒˆä¸­ã¯åŒºåˆ‡ã‚Šè¡Œã‚’éè¡¨ç¤ºã«ã—ã€ãƒœã‚¿ãƒ³ã‚’ã€Œå…ƒã®çŠ¶æ…‹ã«æˆ»ã™ã€ã«å¤‰æ›´
                $(".tr_separate").hide();
                toggleButton.text("å…ƒã®çŠ¶æ…‹ã«æˆ»ã™").off("click").on("click", function() {
                    $(".tr_separate").show();
                    $(this).text("åŒºåˆ‡ã‚Šè¡Œã‚’éè¡¨ç¤ºã«ã™ã‚‹").off("click").on("click", function() {
                        let isHidden = $(".tr_separate").is(":hidden");
                        $(".tr_separate").toggle();
                        $(this).text(isHidden ? "åŒºåˆ‡ã‚Šè¡Œã‚’éè¡¨ç¤ºã«ã™ã‚‹" : "åŒºåˆ‡ã‚Šè¡Œã‚’è¡¨ç¤ºã™ã‚‹");
                    });
                });

                // CSSã§çŸ¢å°ã‚’è¿½åŠ 
                headerRow.find("td").removeClass("sort-asc sort-desc");
                headerCell.addClass(sortState[index] ? "sort-asc" : "sort-desc");

                obj.append(rows);
            });
        }

        headerRow.append(headerCell);
    });

    headerRow.appendTo(obj);

    function comparer(index, columnName, ascending) {
        return function(a, b) {
            let valA = $(a).children("td").eq(index).text();
            let valB = $(b).children("td").eq(index).text();

            if (columnName === "total") {
                return parseFloat(valA) - parseFloat(valB);
            }
            else if (columnName === "è¿½åŠ æ—¥æ™‚") {
                return new Date(valA) - new Date(valB);
            }
            else if ($.isNumeric(valA) && $.isNumeric(valB)) {
                return valA - valB;
            } else {
                return valA.localeCompare(valB);
            }
        };
    }

    let obj_sep = null;
    let x = "", count = 0;

    for (let i = 0; i < info.length; i++) {
        if (x != info[i].level) {
            if (obj_sep != null) {
                obj_sep.html("<td colspan='11' align='center'><b>" + mark + x + " (" + count + "è­œé¢)</b></td>");
            }
            obj_sep = $("<tr class='tr_separate' id='" + mark + info[i].level + "'></tr>");
            obj_sep.appendTo(obj);
            count = 0;
            x = info[i].level;
        }

        let str = $("<tr class='tr_normal'></tr>");
        if(info[i].state) str = $("<tr class='state" + info[i].state + "'></tr>");

        $("<td width='1%'>" + mark + x + "</td>").appendTo(str);
        $("<td width='1%' align='center'>" + (info[i].youtube ? "<a href='" + info[i].youtube + "' target='_blank'><img src='style/youtube.gif' border='0' alt='Youtube' /></a>" : "") + "</td>").appendTo(str);
        $("<td width='1%' align='center'><a href='https://bms-score-viewer.pages.dev/view?md5=" + info[i].md5 + "' target='_blank'>â– </a></td>").appendTo(str);
        $("<td width='13%'><a href='http://www.dream-pro.info/~lavalse/LR2IR/search.cgi?mode=ranking&bmsmd5=" + info[i].md5 + "' target='_blank'>" + info[i].title + "</a></td>").appendTo(str);
        $("<td width='5%'>" + (info[i].artist ? "<a href='" + info[i].url + "' target='_blank'>" + info[i].artist + "</a>" : "") + "</td>").appendTo(str);
        $("<td width='1%'>DL</td>").appendTo(str);
        $("<td width='1%'>" + info[i].bpm + "</td>").appendTo(str);
        $("<td width='1%'>" + info[i].total + "</td>").appendTo(str);
        $("<td width='1%'>" + (info[i].year ? (info[i].year + "/" + (info[i].month || "") + "/" + (info[i].day || "")) : "('Ï‰')ï½¡o(?)") + "</td>").appendTo(str);
        $("<td width='10%'>" + info[i].comment + "</td>").appendTo(str);

        str.appendTo(obj);
        count++;
    }

    if (obj_sep != null) {
        obj_sep.html("<td colspan='11' align='center'><b>" + mark + x + " (" + count + "è­œé¢)</b></td>");
    }
}
</script>

î·›î·œî·™î·š
å¤‰æ›´ç‚¹:
- CSSã§ã‚½ãƒ¼ãƒˆå¯èƒ½ãªã‚«ãƒ©ãƒ ã«ä¸Šä¸‹çŸ¢å°ã‚’å¸¸ã«è¡¨ç¤ºã€‚ã‚½ãƒ¼ãƒˆæ–¹å‘ã«å¿œã˜ã¦çŸ¢å°ã¨è‰²ã‚’å‹•çš„ã«å¤‰æ›´ã€‚
- ã‚½ãƒ¼ãƒˆä¸­ã¯ã€Œå…ƒã®çŠ¶æ…‹ã«æˆ»ã™ã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—ã€ã‚¯ãƒªãƒƒã‚¯ã§å…ƒã®è¡¨ç¤ºã«å¾©å¸°ã€‚

ãœã²è©¦ã—ã¦ã¿ã¦ãã ã•ã„ï¼ ğŸ˜„âœ¨


// éå»ã®æ‰‹æ›¸ãã‚³ãƒ¼ãƒ‰
/*
// ã‚½ãƒ¼ãƒˆã®ãŸã‚ã®å¼•æ•°è¿½åŠ 
function makeBMSTable(info, mark, order) {
	// orderãŒæœªæŒ‡å®šã®å ´åˆã¯null
	if(typeof order === 'undefined') order = null;
	
    let x = "";
    let ev = "";
    let count = 0;
    let obj = $("#table_int");

	// ã‚½ãƒ¼ãƒˆ
	if(order != "" && order != null)
	{
		// herder.jsonã«sortãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯å…ˆã«æŒ‡å®šé †->ã‚¿ã‚¤ãƒˆãƒ«é †ã«ã‚½ãƒ¼ãƒˆ
		let orderAry = [];
		for(let l = 0; l < order.length; l++)
		{
			orderAry.push(order[l].toString());
		}
		
		for(let j = 0; j < info.length; j++)
		{
			let index=orderAry.indexOf(info[j]["level"]);
			info[j]["_index"]=index;
		}

		// è­œé¢æƒ…å ±ã‚’ é›£æ˜“åº¦->åå‰ ã®å„ªå…ˆåº¦ã§ã‚½ãƒ¼ãƒˆ
		info.sort(function(a,b)
		{
			if(a["_index"] < b["_index"])      return -1;
			else if(a["_index"] > b["_index"]) return +1;
			else if(a["title"].toLowerCase() < b["title"].toLowerCase() ) return -1;
			else if(a["title"].toLowerCase() > b["title"].toLowerCase() ) return +1;
			else return 0;
		});
		for(let k=0; k < info.length; k++)
		{
			delete info[k]["_index"];
		}
	} 
	else 
	{
		// ãã†ã§ãªã„å ´åˆã¯ ãƒ¬ãƒ™ãƒ«é †->ã‚¿ã‚¤ãƒˆãƒ«é † ã«ã‚½ãƒ¼ãƒˆ
		info.sort(
			function(a,b){
				let aLv = a["level"].toString();
				let bLv = b["level"].toString();
				if(isNaN(a["level"]) == false && isNaN(b["level"]) == false)
				{
					return a["level"]-b["level"];
				} 
				else if( aLv < bLv )
				{
					return -1;
				} 
				else if( aLv > bLv )
				{
					return 1;
				} 
				else if( a["title"].toLowerCase() < b["title"].toLowerCase() )
				{
					return -1;
				} 
				else if( a["title"].toLowerCase() > b["title"].toLowerCase() )
				{
					return 1;
				} 
				else 
				{
					return 0;
				}
			}
		);
	}
	
    // ã‚«ãƒ©ãƒ ã®è¦‹å‡ºã—æ§‹ç¯‰
    obj.html("");
    $("<tr height='20' style='color:white;background-color:#666666'>"
		+"<td align='center' sortable>LV</td>"
		+"<td align='center' sortable>å‹•<br>ç”»</td>"
		+"<td align='center' sortable>è­œ<br>é¢</td>"
		+"<td align='center' sortable>ã‚¿ã‚¤ãƒˆãƒ«<br>(IRãƒªãƒ³ã‚¯)</td>"
		+"<td align='center' sortable>ä½œè€…(æ•¬ç§°ç•¥)<br>(æœ¬ä½“ãƒªãƒ³ã‚¯)</td>"
		+"<td align='center' sortable>å·®åˆ†</td>"
		+"<td align='center' sortable>BPM</td>"
		+"<td align='center' sortable>total</td>"
		+"<td align='center' sortable>è¿½åŠ æ—¥æ™‚</td>"
		+"<td align='center' sortable>ã‚³ãƒ¡ãƒ³ãƒˆ</td>"
		+"</tr>").appendTo(obj);

    let obj_sep = null;
    for (let i = 0; i < info.length; i++) 
	{
        // é›£åº¦ã”ã¨ã®åŒºåˆ‡ã‚Š
        if (x != info[i].level) 
		{
            // å‰ã®åŒºåˆ‡ã‚Šã«è­œé¢æ•°ã€å¹³å‡å¯†åº¦ã‚’è¿½åŠ 
			// if (obj_sep != null) 
			// {
            //     obj_sep.html("<td colspan=11 align='center'>" + "<b>" + mark + x + " (" + count + "è­œé¢)</b></td>");
            // }
            obj_sep = $("<tr class='tr_separate' id='" + mark + info[i].level + "'></tr>");
            obj_sep.appendTo(obj);
            count = 0;
            x = info[i].level;
        }

        // æœ¬æ–‡
        let str = $("<tr class='tr_normal'></tr>");
        if(info[i].state == 1) 
		{
			str = $("<tr class='state1'></tr>");
        }
        if(info[i].state == 2) 
		{
			str = $("<tr class='state2'></tr>");
        }
        if(info[i].state == 3) 
		{
			str = $("<tr class='state3'></tr>");
        }
        if(info[i].state == 4) 
		{
			str = $("<tr class='state4'></tr>");
        }
        if(info[i].state == 5) 
		{
			str = $("<tr class='state5'></tr>");
        }
        if(info[i].state == 6) 
		{		
			str = $("<tr class='state6'></tr>");
		}

        // ãƒ¬ãƒ™ãƒ«è¡¨è¨˜
        $("<td width='1%'>" + mark + x + "</td>").appendTo(str);

        // å‹•ç”»
		if(info[i].youtube != "" && info[i].youtube != null)
		{
			// YouTube
			$("<td width='1%' align='center'><a href='" + info[i].youtube + "' target='_blank'><img src='style/youtube.gif' border='0' alt='Youtube' /></a></td>").appendTo(str);
		} 
		else if(info[i].video != "" && info[i].video != null)
		{
			// video
			$("<td width='1%' align='center'><a href='http://video.com/" + info[i].video + "' target='_blank'><img src='style/video.gif' border='0' alt='video' /></a></td>").appendTo(str);
		} 
		else 
		{
			$("<td width='1%'></td>").appendTo(str);
		}

		// è­œé¢ç”»åƒ
		$("<td width='1%' akign='center'><a href='https://bms-score-viewer.pages.dev/view?md5=" + info[i].md5 + "' target='_blank'> â– </a></td>").appendTo(str);

        // ã‚¿ã‚¤ãƒˆãƒ«
		if(info[i].state != "")
		{
			if (info[i].state == 3) // æ–°è¦è¿½åŠ 
			{
				$("<td width='13%'>" + "<a href='http://www.dream-pro.info/~lavalse/LR2IR/search.cgi?mode=ranking&bmsmd5=" 
				+ info[i].md5 + "' target='_blank'>" + info[i].title + " <br>ï¼Šæ–°è¦è¿½åŠ ï¼Š" + "</a></td>").appendTo(str);
			}
			else if (info[i].state == 1) // æœªå…¬é–‹
			{
				$("<td width='13%'>" + "<a href='http://www.dream-pro.info/~lavalse/LR2IR/search.cgi?mode=ranking&bmsmd5=" 
				+ info[i].md5 + "' target='_blank'>" + info[i].title + " <br>ï¼Šæœªå…¬é–‹ï¼Š" + "</a></td>").appendTo(str);
			}
		}
        else
		{ 
			// 
			$("<td width='13%'>" + "<a href='http://www.dream-pro.info/~lavalse/LR2IR/search.cgi?mode=ranking&bmsmd5=" + info[i].md5 + "' target='_blank'>" + info[i].title + "</a></td>").appendTo(str);
		}
		
		// ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ
        let astr = "";
        if(info[i].url != "" && info[i].url != null) {
			if(info[i].artist != "" && info[i].artist != null) 
			{
				astr = "<a href='" + info[i].url + "' target='_blank" + "'>" + info[i].artist + "</a>";
			}
			else 
			{
				astr = "<a href='" + info[i].url + "' target='_blank" + "'>" + info[i].url + "</a>";
			}
        } 
		else 
		{
			if(info[i].artist != "" && info[i].artist != null) 
			{
				astr = info[i].artist;
			}
        }

		// URL
        if(info[i].url_pack != "" && info[i].url_pack != null) 
		{
            if(info[i].name_pack != "" && info[i].name_pack != null) 
			{
            astr += "<br />(<a href='" + info[i].url_pack + "'>" + info[i].name_pack + "</a>)";
            } 
			else 
			{
				astr += "<br />(<a href='" + info[i].url_pack + "'>" + info[i].url_pack + "</a>)";
            }
        } 
		else 
		{
			if(info[i].name_pack != "" && info[i].name_pack != null) 
			{
				astr += "<br />(" + info[i].name_pack + ")";
			}
        }
        $("<td width='5%'>" + astr + "</td>").appendTo(str);

        // å·®åˆ†
        // if(info[i].url_diff != "" && info[i].url_diff != null) {
        //	if(info[i].name_diff != "" && info[i].name_diff != null) {
	    //    $("<td width='1%'><a href='" + info[i].url_diff + "'>" + info[i].name_diff + "</a></td>").appendTo(str);
        //	} else {
	    //    $("<td width='1%'><a href='" + info[i].url_diff + "'>" + "DL" + "</a></td>").appendTo(str);
        //	}
        //} else {
        //	if(info[i].name_diff != "" && info[i].name_diff != null) {
	    //    $("<td width='1%'>" + info[i].name_diff + "</td>").appendTo(str);
        //	} else {
	    //    $("<td width='1%'></td>").appendTo(str);
        //	}
        //}
		// levelã¨ã‚¿ã‚¤ãƒˆãƒ«æƒ…å ±ã‚’ä½¿ã£ã¦Githubä¸Šã‹ã‚‰DL
		if (info[i].state == 1)
		{
			$("<td width='1%'> </td>").appendTo(str);
		}
		else
		{
			$("<td width='1%'><a href='sabun/â˜…" + info[i].level + " " + info[i].title + ".zip'>" + "DL" + "</a></td>").appendTo(str);
		}

		// BPM
		$("<td width='1%'>" + info[i].bpm + "</div></td>").appendTo(str);
		// ãƒˆãƒ¼ã‚¿ãƒ«
		$("<td width='1%'>" + info[i].total + "/" + info[i].totalnote + "</div></td>").appendTo(str);
		// æ—¥ä»˜
		if (info[i].year)
		{
			let text = info[i].year;
			if (info[i].month) { text += ("/" + info[i].month); }
			if (info[i].day) { text += ("/" + info[i].day); }
			$("<td width='1%'>" + text + "</div></td>").appendTo(str);
		}
		else
		{
			// ãªã‚“ã‹å…¥ã‚Œã¨ã‹ãªã„ã¨ã‚³ãƒ¡ãƒ³ãƒˆãŒè¿½åŠ æ—¥æ™‚ã®æ–¹ã«æŒ¿å…¥ã•ã‚Œã¦ã—ã¾ã†ï¼›ï¼›
			$("<td width='1%'><font color='#666666'>('Ï‰')ï½¡o(?)</color></div></td>").appendTo(str);
		}
        // ã‚³ãƒ¡ãƒ³ãƒˆ
        $("<td width='10%'>" + info[i].comment + "</div></td>").appendTo(str);

        str.appendTo(obj);
        count++;
    }
    
    // æœ€å¾Œã®åŒºåˆ‡ã‚Šå‡¦ç†(ãƒãƒ¼ã‚¯ãŒæŠœã‘è½ã¡ã¦ãŸã®ã§è¿½åŠ )
    if (obj_sep != null) 
	{
        obj_sep.html("<td colspan='11' align='center'>" + "<b>" + mark + x + " (" + count + "è­œé¢)</b></td>");
	}
}
*/
</script>


</body>
</html>
